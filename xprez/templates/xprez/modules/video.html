{% extends "xprez/modules/base.html" %}
{% load thumbnail xprez %}

{% block css_class_extra %}{{ module.width }}-width {% if module.poster_image %}js-video-with-poster{% endif %}{% endblock %}

{% block content %}
    <div class="xprez-video-item">
        {% if module.poster_image %}
            <style>
                .xprez-video-poster-{{ module.video_id }} {
                    {% thumbnail module.poster_image "500x278" crop="50%" format="WEBP" quality=70 as thumb %}
                    background-image: url({{ thumb.url|build_absolute_uri }});
                    {% endthumbnail %}
                }
                @media only screen and (min-width: 400px) {
                    .xprez-video-poster-{{ module.video_id }} {
                    {% thumbnail module.poster_image "1000x555" crop="50%" format="WEBP" quality=70 as thumb %}
                    background-image: url({{ thumb.url|build_absolute_uri }});
                    {% endthumbnail %}
                    }
                }
                @media only screen and (min-width: 800px) {
                    .xprez-video-poster-{{ module.video_id }} {
                    {% thumbnail module.poster_image "1400x777" crop="50%" format="WEBP" quality=70 as thumb %}
                    background-image: url({{ thumb.url|build_absolute_uri }});
                    {% endthumbnail %}
                    }
                }
                @media only screen and (min-width: 1200px) {
                    .xprez-video-poster-{{ module.video_id }} {
                    {% thumbnail module.poster_image "1700x944" crop="50%" format="WEBP" quality=70 as thumb %}
                    background-image: url({{ thumb.url|build_absolute_uri }});
                    {% endthumbnail %}
                    }
                }
            </style>
            <div class="js-poster xprez-video-poster-{{ module.video_id }}"></div>
        {% endif %}
        <iframe
            id="video-{{ module.pk }}"
            width="560" height="315"
            frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen
            allow="autoplay"
            {% if module.video_type == "youtube" %}
                class="js-youtube" src="https://www.youtube.com/embed/{{ module.video_id }}?enablejsapi=1"
            {% elif module.video_type == "vimeo" %}
                class="js-vimeo" src="https://player.vimeo.com/video/{{ module.video_id }}?color=ffffff&portrait=0&badge=0&api=1"
            {% endif %}
        ></iframe>
    </div>
{% endblock %}
