{% load xprez_admin %}
<div
    class="xprez-content"
    data-mode="{# edit #}{# select #}"
    data-component="xprez-content"
    data-prefix="{{ content.admin_form.prefix }}"
    data-js-controller-class="{{ content.js_controller_class }}"
>
    <div class="xprez-content__header">
        <div class="xprez-content__name">
            <span class="xprez-content__name-icon">
                {% include "xprez/admin/icons/contents/text.html" %}
            </span>
            <div class="xprez-option" data-active="true">
                <label >
                    <i class="xprez-icon-check_circle_outline_small x-variant-unchecked"></i>
                    <i class="xprez-icon-check_circle_small x-variant-checked"></i>
                </label>
                <input type="checkbox" checked>
            </div>
            <span class="xprez-option-group__title-text">{{ content.verbose_name }}</span>
        </div>

        <div class="xprez-content__actions">
            {% block actions %}
                <span class="xprez-icon-btn" title="Copy">
                    <i class="xprez-icon-copy"></i>
                </span>
                <span class="xprez-icon-btn" title="Settings" data-component="xprez-content-popover-trigger">
                    <i class="xprez-icon-settings" data-id="{{ content.pk }}"></i>
                </span>
            {% endblock %}
        </div>

        <div class="xprez-content__actions xprez-content__actions--right">
            <span class="xprez-icon-btn" title="Delete" data-component="xprez-content-delete-trigger">
                <i class="xprez-icon-delete"></i>
                <span data-hidden>{{ content.admin_form.delete }}</span>
            </span>
        </div>
    </div>

    <div data-component="xprez-content-delete-info">
        This content will be deleted when you save the changes.
        <div data-component="xprez-content-delete-undo">undelete</div>
    </div>

    <div class="xprez-content__body">
        {% block content %}
            <div class="xprez-form-table">
                {% if content.preview_image %}
                    <img src="{% static content.preview_image %}" alt="" class="xprez-module__preview-image">
                {% endif %}
                {% block main_fields %}
                    {% for field in content.admin_form.get_main_fields %}
                        {% include 'xprez/admin/form/row.html' with field=field %}
                    {% endfor %}
                {% endblock %}
            </div>
        {% endblock %}
    </div>

    <div popover="manual" class="xprez-popover" data-component="xprez-content-popover">
        <div class="xprez-popover__content">
            {% block popopover_content %}
                <div class="xprez-option-group">
                    <div class="xprez-option-group__heading">
                        <i class="xprez-icon-grid_3_3"></i>
                        <span class="xprez-option-group__title-text">{{ content.verbose_name }}</span>
                        <span
                            class="xprez-btn xprez-btn--sm"
                            title="All settings of selected modules will be overwritten with current settings"
                            data-component="xprez-content-sync-selected"
                        >
                            Sync selected
                            <i class="xprez-icon-sync"></i>
                        </span>
                    </div>

                    <div class="xprez-option-row">
                        <div class="xprez-option xprez-option--marker" data-size="flex-1" data-active="true">
                            <label for="{{ content.admin_form.prefix }}-change-similar">
                                <span>Change style for similar contents</span>
                            </label>
                            <input
                                id="{{ content.admin_form.prefix }}-change-similar"
                                type="checkbox"
                                checked
                                data-component="xprez-content-change-similar"
                            >
                        </div>
                    </div>

                    <div class="xprez-option-group__subtitle">Attributes</div>

                    {% include "xprez/admin/form/row.html" with field=content.admin_form.css_class flex=1 %}
                    {% block options_fields %}
                        {% for field in content.admin_form.get_options_fields %}
                            {% include "xprez/admin/form/row.html" with field=field %}
                        {% endfor %}
                    {% endblock %}

                    {% for config in content.admin_form.xprez_configs %}
                        {% xprez_content_config_render_admin config %}
                    {% endfor %}
                </div>
            {% endblock %}
        </div>
    </div>

    {% block hidden_fields %}
        <input type="hidden" name="content-id" value="{{ content.pk }}">
        {{ content.admin_form.position.as_hidden }}
        {{ content.admin_form.section.as_hidden }}
        {% comment %} {{ content.admin_form.visible }} {% endcomment %}
        {% comment %} {{ content.admin_form.css_class }} {% endcomment %}
        {% comment %} {{ content.admin_form.background_color }} {% endcomment %}
        {% comment %} {{ content.admin_form.alternate_color }} {% endcomment %}
        {% comment %} {{ content.admin_form.margin_bottom }} {% endcomment %}
        {% comment %} {{ content.admin_form.padding_top }} {% endcomment %}
        {% comment %} {{ content.admin_form.padding_bottom }} {% endcomment %}
    {% endblock %}
</div>
