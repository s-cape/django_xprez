{% load i18n %}
{% load xprez_admin %}

{% get_xprez_clipboard form.xprez_admin request form.instance as xprez_clipboard %}

<div class="xprez {{ form.xprez_admin.xprez_ui_css_class }} js-xprez">
    <div class="xprez-top">
        <span class="xprez-option-btn js-collapse_all">Collapse all boxes</span>
        <span
            class="xprez-option-btn js-clipboard-copy clipboard-copy"
            data-url="{% url form.xprez_admin.xprez_clipboard_copy_container_url_name form.instance.pk %}"
        >
            <span class="success-message">âˆš</span>
            Copy all boxes
    </span>
    </div>
    <div class="js-contents-container">
        {% for content in form.xprez_contents %}
            {% xprez_content_render_admin content %}
        {% endfor %}
    </div>
    {% with allowed_contents=form.xprez_get_allowed_contents %}
        {% if allowed_contents %}
            <div class="js-xprez-add xprez-add">
                <h2>+ Add new piece of content +</h2>
                {% include "./includes/add_list.html" with xprez_admin=form.xprez_admin container=form.instance %}
            </div>
        {% endif %}
    {% endwith %}
    </div>

    {% include "./includes/clipboard.html" with container=form.instance xprez_clipboard=xprez_clipboard %}
</div>
