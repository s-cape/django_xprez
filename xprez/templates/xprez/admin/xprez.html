{% load i18n %}
{% load xprez_admin %}

{% get_xprez_clipboard form.xprez_admin request form.instance as xprez_clipboard %}

<div
    class="xprez {{ form.xprez_admin.xprez_ui_css_class }} js-xprez"
    data-clipboard-copy-url="{% url form.xprez_admin.xprez_clipboard_copy_url_name %}"
    data-clipboard-paste-url="{% url form.xprez_admin.xprez_clipboard_paste_url_name %}"
>
    <div class="xprez-top">
        <span class="xprez-option-btn js-collapse_all">Collapse all</span>
        <span
            class="xprez-option-btn js-clipboard-copy xprez-clipboard-copy"
            data-content-type="container"
            data-pk="{{ form.instance.pk }}"
        >
            <span class="xprez-inline-success-message">{% include "./includes/icons/checkmark.html" %} Copied</span>
            <span class="default">Copy all modules</span>
    </span>
    </div>
    <div class="js-contents-container">
        {% for content in form.xprez_contents %}
            {% xprez_content_render_admin content %}
        {% endfor %}
    </div>
    {% with allowed_contents=form.xprez_get_allowed_contents %}
        {% if allowed_contents %}
            <div class="js-xprez-add xprez-add">
                <h2>+ Add new piece of content +</h2>
                {% include "./includes/add_list.html" with xprez_admin=form.xprez_admin container=form.instance %}
            </div>
        {% endif %}
    {% endwith %}
    </div>

    {% include "./includes/clipboard.html" with xprez_clipboard=xprez_clipboard %}
</div>
