0.3.0
=====

Breaking Changes
----------------

### Content renamed to Module

All "content" terminology has been renamed to "module" throughout the codebase:

**Model renames:**
- `Content` → `Module`
- `ContentItem` → `ModuleItem`
- `ContentConfig` → `ModuleConfig`
- `FormsetContent` → `FormsetModule`
- `AjaxUploadFormsetContent` → `AjaxUploadFormsetModule`
- `ContentsContainer` → `Container`
- `ContentSymlink` → `ModuleSymlink`
- `TextContent` → `TextModule`
- `TextContentBase` → `TextModuleBase`
- `QuoteContent` → `QuoteModule`
- `NumbersContent` → `NumbersModule`
- `DownloadContent` → `DownloadModule`
- `TextContentConfig` → `TextModuleConfig`
- `TextContentBaseConfig` → `TextModuleBaseConfig`

**Field renames:**
- `content` → `module` (in ModuleConfig and ModuleItem subclasses)
- `content_foreign_key` → `module_foreign_key` (in ModuleItem)

**Related name changes:**
- `section.contents` → `section.modules`
- `Module.content_configs` → `Module.module_configs`

**Settings renames:**
- `XPREZ_CONTAINER_MODEL_CLASS` default changed from `xprez.ContentsContainer` to `xprez.Container`
- `XPREZ_CONTENTS_AUTOREGISTER` → `XPREZ_MODULES_AUTOREGISTER`
- `XPREZ_CONTENTS_AUTOREGISTER_BUILTINS` → `XPREZ_MODULES_AUTOREGISTER_BUILTINS`
- `XPREZ_CONTENTS_AUTOREGISTER_CUSTOM` → `XPREZ_MODULES_AUTOREGISTER_CUSTOM`
- `XPREZ_DEFAULT_ALLOWED_CONTENTS` → `XPREZ_DEFAULT_ALLOWED_MODULES`
- `XPREZ_DEFAULT_EXCLUDED_CONTENTS` → `XPREZ_DEFAULT_EXCLUDED_MODULES`
- `XPREZ_CK_EDITOR_CONTENT_WIDGET` → `XPREZ_CK_EDITOR_MODULE_WIDGET`
- `XPREZ_GRID_BOXES_CONTENT_WIDGET` → `XPREZ_GRID_BOXES_MODULE_WIDGET`
- `XPREZ_TEXT_IMAGE_CONTENT_WIDGET` → `XPREZ_TEXT_IMAGE_MODULE_WIDGET`

**Form renames:**
- `BaseContentForm` → `BaseModuleForm`
- `ContentConfigForm` → `ModuleConfigForm`
- `TextContentBaseForm` → `TextModuleBaseForm`
- `TextContentForm` → `TextModuleForm`
- `QuoteContentForm` → `QuoteModuleForm`
- `NumbersContentForm` → `NumbersModuleForm`
- `DownloadContentForm` → `DownloadModuleForm`

**Template tag renames:**
- `xprez_content_render_front` → `xprez_module_render_front`
- `xprez_content_render_admin` → `xprez_module_render_admin`
- `xprez_content_config_render_admin` → `xprez_module_config_render_admin`
- `xprez_front_media(contents=...)` → `xprez_front_media(modules=...)`

**Template directory renames:**
- `xprez/templates/xprez/modules/` → `xprez/templates/xprez/modules/`
- `xprez/templates/xprez/admin/modules/` → `xprez/templates/xprez/admin/modules/`
- `xprez/templates/xprez/admin/module_configs/` → `xprez/templates/xprez/admin/module_configs/`
- `xprez/templates/xprez/admin/icons/modules/` → `xprez/templates/xprez/admin/icons/modules/`

**JavaScript class renames:**
- `XprezContent` → `XprezModule`
- `XprezContentPopover` → `XprezModulePopover`
- `XprezContentDeleter` → `XprezModuleDeleter`
- `XprezContentConfig` → `XprezModuleConfig`

**CSS class renames:**
- `.xprez-content` → `.xprez-module`
- `.xprez-text-content` → `.xprez-text-module`

**Manager renames:**
- `contents_manager` → `modules_manager`
- `ContentTypeManager` → `ModuleManager`

### Migration Notes for External Apps

**IMPORTANT:** If your app has models that inherit from xprez models (e.g., `Container`, `Module`, `ModuleConfig`), you **must** add explicit `parent_link` fields to maintain backward compatibility with the database.

Example for a model inheriting from `Container`:

```python
from django.db import models
from xprez.models import Container

class Page(Container):
    container_ptr = models.OneToOneField(
        Container,
        on_delete=models.CASCADE,
        parent_link=True,
        primary_key=True,
        db_column="contentscontainer_ptr_id",  # Keep old column name
    )
    # ... your fields
```

For models inheriting from `Module`:
```python
from xprez.models import Module

class MyCustomModule(Module):
    module_ptr = models.OneToOneField(
        Module,
        on_delete=models.CASCADE,
        parent_link=True,
        primary_key=True,
        db_column="content_ptr_id",  # Keep old column name
    )
    # ... your fields
```

The `db_column` parameter keeps the old database column name, ensuring your existing data remains intact.

### Other Changes

- Introduce `Section` model. All modules are now in sections.
- Introduce `SectionConfig` models:
    - Holds css-breakpoint specific settings for each `Section`
- Introduce `ModuleConfig` models:
    - Holds css-breakpoint specific settings for each `Module`
    - Specified by `Module.config_model` for each `Module`. (e.g. config_model = `xprez.TextModuleConfig`)
- Renamed `extra_context` parameter to `context` and is now required in:
    - `Module.render_front()`
    - `Module.render_admin()`
- Removed `Module.show_front()`. Override `Module.render_front()` instead.
- Removed `Module.page`. Use `Module.section.container` instead.
- Removed `Module.create_for_page()`. Use standard `{Model}.objects.create()`, position is set by frontend.
- `Module.content_type` and `Container.content_type` are now full model class following django convention
    - e.g. `xprez.TextModule`, not `textmodule`
    - This is now the (only) way to specify modules - in `settings` or `allowed_modules`. 
- Removed `XprezAdminMixin.xprez_add_content_before_*()`. Now handled by `XprezAdminMixin.add_view()`.
- Removed `XprezAdminMixin.xprez_ui_css_class`. Was not used.
- Removed `XprezAdminMixin.copy_*` methods for copying container. Now replaced with clipboard functionality.
- Renamed `XprezModelFormMixin`'s `save_xprez_contents` to `xprez_save`
- Attributes `Module.saved` and `Section.saved`
    - Indicates if module/section has been saved in admin
    - Unsaved modules/sections are not rendered on frontend
- `Section` and `Module` are now deleted after form submit, not immediately

- `xprez.urls` moved to `xprez.admin.urls`
- `xprez.admin_forms` moved to `xprez.admin.forms`
- `xprez.form_fields` moved to `xprez.admin.fields`
- `xprez.models.fields` moved to `xprez.admin.fields`
